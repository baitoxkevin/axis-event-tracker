(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[825],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a(95155);a(12115);var r=a(32467),l=a(83101),i=a(64269);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function n(e){let{className:t,variant:a,size:l,asChild:n=!1,...o}=e,c=n?r.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(d({variant:a,size:l,className:t})),...o})}},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155);a(12115);var r=a(32467),l=a(83101),i=a(64269);let d=(0,l.F)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,asChild:l=!1,...n}=e,o=l?r.DX:"span";return(0,s.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(d({variant:a}),t),...n})}},14187:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var s=a(92118);function r(e,t){return+(0,s.a)(e)>+(0,s.a)(t)}},17037:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var s=a(95155);a(12115);var r=a(96898),l=a(64269);function i(e){let{className:t,children:a,...i}=e;return(0,s.jsxs)(r.bL,{"data-slot":"scroll-area",className:(0,l.cn)("relative",t),...i,children:[(0,s.jsx)(r.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(d,{}),(0,s.jsx)(r.OK,{})]})}function d(e){let{className:t,orientation:a="vertical",...i}=e;return(0,s.jsx)(r.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,l.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...i,children:(0,s.jsx)(r.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},18990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W});var s=a(95155),r=a(12115),l=a(20063),i=a(3998),d=a(23183),n=a(20779),o=a(90368),c=a(27937),m=a(54916),x=a(55410),u=a(91169),h=a(26983),g=a(52987),b=a(54255),v=a(52056),p=a(21873),f=a(26467),k=a(58576),j=a(14187),N=a(15503),y=a(79956),w=a(92381),A=a(64269),M=a(27063),P=a(11647),z=a(17037),C=a(86259),F=a(71847);let _=(0,F.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var S=a(95740),L=a(35299);let T=(0,F.A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),E=(0,F.A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var G=a(65142),D=a(20243),B=a(86651),R=a(20508);function $(e){let{open:t,onOpenChange:a,scheduleId:l,direction:n,scheduleDate:o,onSelect:c,isLoading:m,excludeGuestIds:x=[]}=e,[g,v]=(0,r.useState)(""),[p,f]=(0,r.useState)(null),{data:k,isLoading:j}=d.i.transport.dashboard.unassignedGuests.useQuery({direction:n,date:o},{enabled:t}),N=(0,r.useMemo)(()=>k?k.filter(e=>{if(x.includes(e.id))return!1;if(g){var t;let a=g.toLowerCase(),s="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),r=(e.email||"").toLowerCase(),l=(null==(t="arrival"===n?e.arrivalFlightNumber:e.departureFlightNumber)?void 0:t.toLowerCase())||"";return s.includes(a)||r.includes(a)||l.includes(a)}return!0}):[],[k,x,g,n]);return(0,s.jsx)(M.cj,{open:t,onOpenChange:a,children:(0,s.jsxs)(M.h,{side:"bottom",className:"h-[80vh] rounded-t-2xl px-0",children:[(0,s.jsxs)(M.Fm,{className:"px-4 pb-2",children:[(0,s.jsx)(M.qp,{className:"text-left",children:"Add Passenger"}),(0,s.jsxs)(M.Qs,{className:"text-left",children:["Select a guest to add to this ",n," transport"]})]}),(0,s.jsx)("div",{className:"px-4 pb-3",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(B.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(G.p,{placeholder:"Search by name, email, or flight...",value:g,onChange:e=>v(e.target.value),className:"pl-9",autoFocus:!0})]})}),(0,s.jsx)(z.F,{className:"flex-1 h-[calc(80vh-160px)]",children:(0,s.jsx)("div",{className:"px-4 space-y-2",children:j?Array.from({length:5}).map((e,t)=>(0,s.jsx)("div",{className:"p-3 rounded-lg border bg-card",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(D.E,{className:"h-10 w-10 rounded-full"}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(D.E,{className:"h-4 w-32"}),(0,s.jsx)(D.E,{className:"h-3 w-24"})]})]})},t)):0===N.length?(0,s.jsxs)("div",{className:"py-12 text-center",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 mx-auto text-muted-foreground mb-3"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:g?"No guests match your search":"No unassigned guests for this date"}),g&&(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"mt-2",onClick:()=>v(""),children:"Clear search"})]}):N.map(e=>{let t="arrival"===n?e.arrivalFlightNumber:e.departureFlightNumber,a="arrival"===n?e.arrivalTime:e.departureTime,r=m&&p===e.id;return(0,s.jsxs)("button",{onClick:()=>{var t;f(t=e.id),c(t)},disabled:m,className:(0,A.cn)("w-full p-3 rounded-lg border bg-card text-left transition-all","hover:border-primary hover:bg-primary/5","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed",r&&"border-primary bg-primary/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center shrink-0",children:(0,s.jsx)(R.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"font-medium truncate",children:[e.firstName," ",e.lastName]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[t&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.A,{className:"h-3 w-3"}),t]}),a&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(h.A,{className:"h-3 w-3"}),null==a?void 0:a.slice(0,5)]})]})]}),(0,s.jsx)("div",{className:"shrink-0",children:r?(0,s.jsx)(L.A,{className:"h-5 w-5 animate-spin text-primary"}):(0,s.jsx)(T,{className:"h-5 w-5 text-muted-foreground"})})]}),e.travelType&&(0,s.jsx)("div",{className:"mt-2 flex gap-1",children:(0,s.jsx)(P.E,{variant:"outline",className:"text-xs capitalize",children:e.travelType})})]},e.id)})})}),!j&&N.length>0&&(0,s.jsxs)("div",{className:"px-4 py-3 border-t bg-muted/30 text-center text-sm text-muted-foreground",children:[N.length," guest",1!==N.length?"s":""," ","available"]})]})})}var Q=a(18720),I=a(26497),O=a(8751);function q(e){var t,a,l,o,c,m,x,g,v,f,k,j;let{schedule:N,open:y,onOpenChange:w,onUpdate:F}=e,[G,D]=(0,r.useState)(!1),[B,R]=(0,r.useState)(null),[q,H]=(0,r.useState)(null),V=d.i.useUtils(),{data:Y}=d.i.transport.dashboard.unassignedGuests.useQuery({direction:"arrival"},{enabled:y&&(null==N?void 0:N.direction)==="arrival"}),{data:W}=d.i.transport.dashboard.unassignedGuests.useQuery({direction:"departure"},{enabled:y&&(null==N?void 0:N.direction)==="departure"}),{data:U,refetch:X}=d.i.transport.schedules.getById.useQuery({id:(null==N?void 0:N.id)||""},{enabled:y&&!!(null==N?void 0:N.id),refetchOnMount:!0}),J=U?{...N,...U,vehicle:U.vehicle?{...U.vehicle,vehicleType:U.vehicle.vehicle_type||U.vehicle.vehicleType,driverName:U.vehicle.driver_name||U.vehicle.driverName,driverPhone:U.vehicle.driver_phone||U.vehicle.driverPhone}:null==N?void 0:N.vehicle,assignments:(null==(t=U.assignments)?void 0:t.map(e=>({id:e.id,guest:e.guest?{id:e.guest.id,firstName:e.guest.first_name||e.guest.firstName,lastName:e.guest.last_name||e.guest.lastName,email:e.guest.email,phone:e.guest.phone,arrivalFlightNumber:e.guest.arrival_flight_number||e.guest.arrivalFlightNumber,departureFlightNumber:e.guest.departure_flight_number||e.guest.departureFlightNumber}:null})).filter(e=>e.guest))||(null==N?void 0:N.assignments)}:N,K=d.i.transport.assignments.unassign.useMutation({onSuccess:()=>{Q.oR.success("Guest removed from schedule"),X(),V.transport.schedules.list.invalidate(),V.transport.dashboard.unassignedGuests.invalidate(),null==F||F()},onError:e=>{Q.oR.error(e.message||"Failed to remove guest")},onSettled:()=>{R(null)}}),Z=d.i.transport.assignments.assign.useMutation({onSuccess:()=>{Q.oR.success("Guest added to schedule"),X(),V.transport.schedules.list.invalidate(),V.transport.dashboard.unassignedGuests.invalidate(),D(!1),H(null),null==F||F()},onError:e=>{Q.oR.error(e.message||"Failed to add guest"),H(null)}}),ee=(0,r.useMemo)(()=>{var e,t,a;if(!N)return[];let s="arrival"===N.direction?Y:W;if(!s)return[];let r=null==(e=N.notes)?void 0:e.match(/Flights?: ([^-]+)/),l=r?r[1].split(",").map(e=>e.trim().split(" ")[0]):[],i=new Set((null==U||null==(t=U.assignments)?void 0:t.map(e=>{var t;return null==(t=e.guest)?void 0:t.id}))||(null==(a=N.assignments)?void 0:a.map(e=>e.guest.id))||[]);return s.filter(e=>{if(i.has(e.id))return!1;let t="arrival"===N.direction?e.arrivalFlightNumber:e.departureFlightNumber;return!(l.length>0)||!t||l.some(e=>t.includes(e))}).slice(0,5)},[N,Y,W,U]);if(!J)return null;let et=(null==(a=J.vehicle)?void 0:a.vehicleType)||(null==(l=J.vehicle)?void 0:l.type)||"vehicle",ea=(null==(o=J.assignments)?void 0:o.length)||0,es=(null==(c=J.vehicle)?void 0:c.capacity)||0,er=Math.max(0,es-ea),el=0===er,ei=(e=>{switch(null==e?void 0:e.toLowerCase()){case"bus":return{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"};case"van":return{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"};case"mpv":return{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"};case"starex":return{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"};case"sedan":return{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"};default:return{bg:"bg-slate-100",text:"text-slate-700",border:"border-slate-300"}}})(et),ed=null==(m=J.notes)?void 0:m.match(/Flights?: ([^-]+)/),en=ed?ed[1].trim():"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(M.cj,{open:y,onOpenChange:w,children:(0,s.jsxs)(M.h,{side:"bottom",className:"h-[85vh] rounded-t-2xl px-0",children:[(0,s.jsx)(M.Fm,{className:"px-4 pb-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,A.cn)("p-2 rounded-lg",ei.bg),children:(0,s.jsx)(n.A,{className:(0,A.cn)("h-5 w-5",ei.text)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(M.qp,{className:"text-left",children:(null==(x=J.vehicle)?void 0:x.name)||"Vehicle TBD"}),(0,s.jsxs)(M.Qs,{className:"text-left",children:[null==(g=J.pickupTime)?void 0:g.slice(0,5)," pickup"]})]})]}),(0,s.jsxs)(P.E,{variant:"secondary",className:(0,A.cn)("text-sm font-medium",el?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"),children:[ea,"/",es]})]})}),(0,s.jsx)(z.F,{className:"flex-1 h-[calc(85vh-140px)]",children:(0,s.jsxs)("div",{className:"px-4 space-y-4",children:[(0,s.jsx)("div",{className:(0,A.cn)("rounded-lg p-4",ei.bg,"bg-opacity-50"),children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.A,{className:(0,A.cn)("h-4 w-4",ei.text)}),(0,s.jsx)("span",{className:"text-sm font-medium",children:null==(v=J.pickupTime)?void 0:v.slice(0,5)})]}),J.pickupLocation&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(p.A,{className:(0,A.cn)("h-4 w-4 mt-0.5 shrink-0",ei.text)}),(0,s.jsxs)("span",{className:"text-sm",children:[J.pickupLocation,J.dropoffLocation&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:" to "}),J.dropoffLocation]})]})]}),en&&(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(b.A,{className:(0,A.cn)("h-4 w-4 mt-0.5 shrink-0",ei.text)}),(0,s.jsx)("span",{className:"text-sm",children:en})]}),(null==(f=J.vehicle)?void 0:f.driverPhone)&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(_,{className:(0,A.cn)("h-4 w-4",ei.text)}),(0,s.jsxs)("a",{href:"tel:".concat(J.vehicle.driverPhone),className:"text-sm text-blue-600 underline",children:[J.vehicle.driverName||"Driver",": ",J.vehicle.driverPhone]})]})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Capacity"}),(0,s.jsxs)("span",{className:"font-medium",children:[er," spot",1!==er?"s":""," available"]})]}),(0,s.jsx)("div",{className:"h-2 rounded-full bg-muted overflow-hidden",children:(0,s.jsx)("div",{className:(0,A.cn)("h-full rounded-full transition-all duration-300",el?"bg-green-500":"bg-blue-500"),style:{width:"".concat(Math.min(ea/es*100,100),"%")}})})]}),!el&&ee.length>0&&(0,s.jsxs)("div",{className:"rounded-xl bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-950/30 dark:to-green-950/20 p-4 border border-emerald-200 dark:border-emerald-800",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-emerald-100 dark:bg-emerald-900/50",children:(0,s.jsx)(S.A,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),(0,s.jsx)("span",{className:"text-sm font-semibold text-emerald-800 dark:text-emerald-300",children:"Quick Assign"}),(0,s.jsx)("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 ml-auto",children:"Suggested guests"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:(0,s.jsx)(I.N,{mode:"popLayout",children:ee.map(e=>{var t;let a="arrival"===J.direction?e.arrivalFlightNumber:e.departureFlightNumber,r=q===e.id;return(0,s.jsxs)(O.P.button,{initial:!1,animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:()=>{var t;H(t=e.id),Z.mutate({guestId:t,scheduleId:J.id,assignmentType:J.direction})},disabled:r||Z.isPending,className:(0,A.cn)("flex flex-col items-start px-3 py-2 rounded-lg text-left transition-all min-w-0","bg-white dark:bg-emerald-900/40 border border-emerald-200 dark:border-emerald-700","hover:bg-emerald-100 dark:hover:bg-emerald-900/60 hover:border-emerald-300 hover:shadow-sm","active:scale-95",(r||Z.isPending)&&"opacity-50 cursor-not-allowed"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5 w-full min-w-0",children:[r?(0,s.jsx)(L.A,{className:"h-3.5 w-3.5 animate-spin text-emerald-600 shrink-0"}):(0,s.jsx)(T,{className:"h-3.5 w-3.5 text-emerald-600 shrink-0"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-emerald-800 dark:text-emerald-300 truncate",children:[e.firstName," ",null==(t=e.lastName)?void 0:t.charAt(0),"."]})]}),a&&(0,s.jsxs)("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 flex items-center gap-1 mt-0.5 w-full min-w-0",children:[(0,s.jsx)(b.A,{className:"h-3 w-3 shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:a})]})]},e.id)})})}),(0,s.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>D(!0),className:"w-full mt-3 text-emerald-700 dark:text-emerald-300 hover:bg-emerald-100 dark:hover:bg-emerald-900/50",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"View all unassigned guests"]})]}),(0,s.jsx)(C.w,{}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"font-medium",children:"Passengers"}),(0,s.jsx)(P.E,{variant:"outline",className:"ml-1",children:ea})]}),!el&&(0,s.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>D(!0),className:"gap-1",children:[(0,s.jsx)(T,{className:"h-4 w-4"}),"Add"]})]}),0===ea?(0,s.jsxs)("div",{className:"py-8 text-center",children:[(0,s.jsx)(u.A,{className:"h-10 w-10 mx-auto text-muted-foreground mb-2"}),(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"No passengers assigned"}),(0,s.jsxs)(i.$,{variant:"outline",size:"sm",className:"mt-3",onClick:()=>D(!0),children:[(0,s.jsx)(T,{className:"h-4 w-4 mr-1"}),"Add passengers"]})]}):(0,s.jsx)("div",{className:"space-y-2",children:null==(k=J.assignments)?void 0:k.map(e=>{let t=B===e.id,a="arrival"===J.direction?e.guest.arrivalFlightNumber:e.guest.departureFlightNumber;return(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center justify-between p-3 rounded-lg bg-muted/50 transition-opacity",t&&"opacity-50"),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"font-medium truncate",children:[e.guest.firstName," ",e.guest.lastName]}),a&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(b.A,{className:"h-3 w-3"}),a]})]}),(0,s.jsx)(i.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-500 hover:text-red-700 hover:bg-red-50 shrink-0",onClick:()=>{var t;R(t=e.id),K.mutate({id:t})},disabled:t,children:t?(0,s.jsx)(L.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(E,{className:"h-4 w-4"})})]},e.id)})})]})}),!el&&ea>0&&(0,s.jsx)("div",{className:"px-4 py-3 border-t bg-background",children:(0,s.jsxs)(i.$,{className:"w-full",variant:"outline",onClick:()=>D(!0),children:[(0,s.jsx)(T,{className:"h-4 w-4 mr-2"}),"Add more passengers"]})})]})}),(0,s.jsx)($,{open:G,onOpenChange:D,scheduleId:J.id,direction:J.direction,scheduleDate:J.scheduleDate,onSelect:e=>{Z.mutate({guestId:e,scheduleId:J.id,assignmentType:J.direction})},isLoading:Z.isPending,excludeGuestIds:(null==(j=J.assignments)?void 0:j.map(e=>e.guest.id))||[]})]})}let H=new Date("2026-01-18"),V=new Date("2026-01-23");function Y(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),a=(0,r.useRef)({}),M=(0,r.useRef)(!1),P=e.get("flight"),z="true"===e.get("mismatch"),C=(0,r.useMemo)(()=>{let t=e.get("date");if(t)try{let e=(0,f.H)(t);if((0,k.Y)(e,H))return H;if((0,j.d)(e,V))return V;return e}catch(e){}return new Date("2026-01-18")},[e]),F=(0,r.useMemo)(()=>{let t=e.get("direction");return"arrival"===t||"departure"===t?t:"arrival"},[e]),[_,S]=(0,r.useState)(C),[L,T]=(0,r.useState)(F),[E,G]=(0,r.useState)(null),[D,B]=(0,r.useState)(!1),[R,$]=(0,r.useState)(new Set),Q=(0,r.useRef)("2026-01-18"),I=(0,r.useRef)("2026-01-21"),{data:Y,isLoading:W,refetch:U}=d.i.transport.schedules.list.useQuery({dateFrom:(0,N.GP)(_,"yyyy-MM-dd"),dateTo:(0,N.GP)(_,"yyyy-MM-dd"),direction:L}),{data:X,isLoading:J}=d.i.transport.prePlannedGroups.getByDate.useQuery({date:(0,N.GP)(_,"yyyy-MM-dd")}),K=(0,r.useMemo)(()=>X&&X.direction===L?X:null,[X,L]),Z=!(Y&&Y.length>0)&&K&&K.groups.length>0;(0,r.useEffect)(()=>{if(Y&&!M.current&&(P||z)){let e=new Set;if(Y.forEach(t=>{var a;(null==(a=t.assignments)?void 0:a.some(e=>{let a="arrival"===t.direction?e.guest.arrivalFlightNumber:e.guest.departureFlightNumber;return P?a===P:a}))&&e.add(t.id)}),e.size>0){$(e);let t=Array.from(e)[0];setTimeout(()=>{let e=a.current[t];e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),M.current=!0)},300)}}},[Y,P,z]),(0,r.useEffect)(()=>{P||z||($(new Set),M.current=!1)},[P,z]);let ee=!(0,k.Y)((0,y.e)(_,1),H),et=!(0,j.d)((0,w.f)(_,1),V),ea=e=>{let a="prev"===e?(0,y.e)(_,1):(0,w.f)(_,1);(0,k.Y)(a,H)||(0,j.d)(a,V)||(S(a),t.replace("/transport?date=".concat((0,N.GP)(a,"yyyy-MM-dd"),"&direction=").concat(L),{scroll:!1}))},es=e=>{let a;if(e===L)return;let s=(0,N.GP)(_,"yyyy-MM-dd");"arrival"===L?Q.current=s:I.current=s,T(e),a="arrival"===e?Q.current:I.current,S((0,f.H)(a)),t.replace("/transport?date=".concat(a,"&direction=").concat(e),{scroll:!1})},er=e=>{switch(null==e?void 0:e.toLowerCase()){case"bus":return{accent:"bg-gradient-to-b from-blue-500 to-blue-600",bg:"bg-gradient-to-br from-blue-50 to-blue-100/50 dark:from-blue-950/40 dark:to-blue-900/20",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200/60 dark:border-blue-800/40",badge:"bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-700",iconBg:"bg-blue-100 dark:bg-blue-900/50",shadow:"shadow-blue-500/10"};case"van":return{accent:"bg-gradient-to-b from-emerald-500 to-emerald-600",bg:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-950/40 dark:to-emerald-900/20",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200/60 dark:border-emerald-800/40",badge:"bg-emerald-500/10 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700",iconBg:"bg-emerald-100 dark:bg-emerald-900/50",shadow:"shadow-emerald-500/10"};case"mpv":return{accent:"bg-gradient-to-b from-violet-500 to-violet-600",bg:"bg-gradient-to-br from-violet-50 to-violet-100/50 dark:from-violet-950/40 dark:to-violet-900/20",text:"text-violet-700 dark:text-violet-300",border:"border-violet-200/60 dark:border-violet-800/40",badge:"bg-violet-500/10 text-violet-700 dark:text-violet-300 border-violet-200 dark:border-violet-700",iconBg:"bg-violet-100 dark:bg-violet-900/50",shadow:"shadow-violet-500/10"};case"starex":return{accent:"bg-gradient-to-b from-amber-500 to-amber-600",bg:"bg-gradient-to-br from-amber-50 to-amber-100/50 dark:from-amber-950/40 dark:to-amber-900/20",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200/60 dark:border-amber-800/40",badge:"bg-amber-500/10 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-700",iconBg:"bg-amber-100 dark:bg-amber-900/50",shadow:"shadow-amber-500/10"};case"sedan":return{accent:"bg-gradient-to-b from-slate-500 to-slate-600",bg:"bg-gradient-to-br from-slate-50 to-slate-100/50 dark:from-slate-950/40 dark:to-slate-900/20",text:"text-slate-700 dark:text-slate-300",border:"border-slate-200/60 dark:border-slate-800/40",badge:"bg-slate-500/10 text-slate-700 dark:text-slate-300 border-slate-200 dark:border-slate-700",iconBg:"bg-slate-100 dark:bg-slate-900/50",shadow:"shadow-slate-500/10"};default:return{accent:"bg-gradient-to-b from-sky-500 to-sky-600",bg:"bg-gradient-to-br from-sky-50 to-sky-100/50 dark:from-sky-950/40 dark:to-sky-900/20",text:"text-sky-700 dark:text-sky-300",border:"border-sky-200/60 dark:border-sky-800/40",badge:"bg-sky-500/10 text-sky-700 dark:text-sky-300 border-sky-200 dark:border-sky-700",iconBg:"bg-sky-100 dark:bg-sky-900/50",shadow:"shadow-sky-500/10"}}},el=Z?(null==K?void 0:K.totalPax)||0:(null==Y?void 0:Y.reduce((e,t)=>{var a;return e+((null==(a=t.assignments)?void 0:a.length)||0)},0))||0,ei=Z?(null==K?void 0:K.totalPax)||0:(null==Y?void 0:Y.reduce((e,t)=>{var a;return e+((null==(a=t.vehicle)?void 0:a.capacity)||0)},0))||0,ed=Z?(null==K?void 0:K.totalGroups)||0:(null==Y?void 0:Y.length)||0;return(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 pb-20",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 shadow-sm",children:[(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"p-1.5 rounded-lg bg-sky-100 dark:bg-sky-900/50",children:(0,s.jsx)(n.A,{className:"h-4 w-4 text-sky-600 dark:text-sky-400"})}),(0,s.jsx)("h1",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Transport Schedule"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-50 dark:bg-slate-900/50",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>ea("prev"),disabled:!ee,className:"h-9 w-9 p-0 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-30",children:(0,s.jsx)(o.A,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"font-semibold text-slate-900 dark:text-white",children:(0,N.GP)(_,"EEEE")}),(0,s.jsx)("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:(0,N.GP)(_,"MMM d, yyyy")})]}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>ea("next"),disabled:!et,className:"h-9 w-9 p-0 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-30",children:(0,s.jsx)(c.A,{className:"h-5 w-5 text-slate-600 dark:text-slate-400"})})]}),(0,s.jsx)("div",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex gap-2 p-1 bg-slate-100 dark:bg-slate-700 rounded-xl",children:[(0,s.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>es("arrival"),className:(0,A.cn)("flex-1 rounded-lg h-9 transition-all","arrival"===L?"bg-white dark:bg-slate-600 shadow-sm text-sky-600 dark:text-sky-400 font-semibold":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:[(0,s.jsx)(m.A,{className:(0,A.cn)("h-4 w-4 mr-2","arrival"===L&&"text-sky-500")}),"Arrivals"]}),(0,s.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>es("departure"),className:(0,A.cn)("flex-1 rounded-lg h-9 transition-all","departure"===L?"bg-white dark:bg-slate-600 shadow-sm text-orange-600 dark:text-orange-400 font-semibold":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"),children:[(0,s.jsx)(x.A,{className:(0,A.cn)("h-4 w-4 mr-2","departure"===L&&"text-orange-500")}),"Departures"]})]})}),(Y||Z)&&(0,s.jsxs)("div",{className:"flex justify-center gap-6 px-4 py-3 border-t border-slate-200 dark:border-slate-700",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-violet-100 dark:bg-violet-900/40",children:(0,s.jsx)(n.A,{className:"h-3.5 w-3.5 text-violet-600 dark:text-violet-400"})}),(0,s.jsxs)("span",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:ed}),(0,s.jsx)("span",{className:"text-slate-500 dark:text-slate-400 ml-1",children:"trips"})]})]}),(0,s.jsx)("div",{className:"h-4 w-px bg-slate-200 dark:bg-slate-700"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-sky-100 dark:bg-sky-900/40",children:(0,s.jsx)(u.A,{className:"h-3.5 w-3.5 text-sky-600 dark:text-sky-400"})}),(0,s.jsxs)("span",{className:"text-sm",children:[(0,s.jsx)("span",{className:"font-bold text-slate-900 dark:text-white",children:el}),!Z&&(0,s.jsxs)("span",{className:"text-slate-500 dark:text-slate-400",children:["/",ei]}),(0,s.jsx)("span",{className:"text-slate-500 dark:text-slate-400 ml-1",children:"pax"})]})]})]})]}),(0,s.jsx)("div",{className:"px-4 py-4 space-y-4",children:W?(0,s.jsx)(O.P.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:Array.from({length:5}).map((e,t)=>(0,s.jsx)(O.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.08*t,duration:.3},children:(0,s.jsxs)("div",{className:"relative rounded-2xl overflow-hidden bg-white dark:bg-slate-800 border border-slate-200/60 dark:border-slate-700/40",children:[(0,s.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1.5 bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsxs)("div",{className:"p-4 pl-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-8 w-14 rounded-lg bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-7 w-20 rounded-lg bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsx)("div",{className:"h-8 w-16 rounded-xl bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsxs)("div",{className:"flex gap-1.5 mb-3",children:[(0,s.jsx)("div",{className:"h-5 w-5 rounded bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-5 w-24 rounded-md bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-5 w-20 rounded-md bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-4 w-24 rounded bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-4 w-4 rounded bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-4 w-28 rounded bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsx)("div",{className:"h-px bg-slate-100 dark:bg-slate-700/50 mb-3"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex -space-x-1.5",children:[(0,s.jsx)("div",{className:"h-6 w-6 rounded-full bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"}),(0,s.jsx)("div",{className:"h-6 w-6 rounded-full bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsx)("div",{className:"h-3 w-20 rounded bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]}),(0,s.jsx)("div",{className:"h-5 w-16 rounded-lg bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 dark:from-slate-700 dark:via-slate-600 dark:to-slate-700 animate-shimmer bg-[length:200%_100%]"})]})]})]})},t))}):Z?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 rounded-xl p-3 border border-amber-200/60 dark:border-amber-800/40",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-amber-700 dark:text-amber-300",children:["Pre-Planned Schedule â€¢ ",(null==K?void 0:K.direction)==="arrival"?"Arrivals":"Departures"]})]})}),null==K?void 0:K.groups.map((e,t)=>{var a;let r=er(e.vehicleType.toLowerCase()),l=function(e){if(!e)return!1;let t=e.match(/^(\d{1,2}):(\d{2})/);if(!t)return!1;let a=parseInt(t[1],10);return a>=23||a<7}(e.transportTime);return(0,s.jsx)(O.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t,duration:.3,ease:"easeOut"},children:(0,s.jsxs)("div",{className:(0,A.cn)("relative rounded-2xl overflow-hidden","bg-white dark:bg-slate-800","border shadow-sm",r.border,r.shadow),children:[(0,s.jsx)("div",{className:(0,A.cn)("absolute left-0 top-0 bottom-0 w-1.5 rounded-l-2xl",r.accent)}),l&&(0,s.jsxs)("div",{className:"bg-gradient-to-r from-violet-50 to-purple-50 dark:from-violet-950/40 dark:to-purple-950/40 px-4 py-2 border-b border-violet-200/60 dark:border-violet-800/40 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDF19"}),(0,s.jsx)("span",{className:"text-xs font-medium text-violet-700 dark:text-violet-300",children:"Midnight Surcharge Hours"})]}),(0,s.jsxs)("div",{className:"p-4 pl-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Gather"}),(0,s.jsx)("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:e.gatherTime})]}),(0,s.jsx)(g.A,{className:"h-4 w-4 text-slate-400"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Depart"}),(0,s.jsx)("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:e.transportTime})]})]}),(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center gap-1.5 px-2.5 py-1 rounded-lg border",r.badge),children:[(0,s.jsx)(n.A,{className:(0,A.cn)("h-3.5 w-3.5",r.text)}),(0,s.jsx)("span",{className:(0,A.cn)("text-sm font-semibold",r.text),children:(null==(a=e.vehicleInfo)?void 0:a.name)||e.vehicleType})]})]}),(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl",r.bg),children:[(0,s.jsx)(u.A,{className:(0,A.cn)("h-4 w-4",r.text)}),(0,s.jsxs)("span",{className:(0,A.cn)("text-sm font-bold",r.text),children:[e.combinedPax," pax"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:(0,s.jsx)(b.A,{className:"h-3.5 w-3.5 text-sky-500 dark:text-sky-400"})}),e.flights.slice(0,5).map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium bg-sky-50 dark:bg-sky-950/40 text-sky-700 dark:text-sky-300 border border-sky-200/60 dark:border-sky-800/40",children:e},t)),e.flights.length>5&&(0,s.jsxs)("span",{className:"text-xs text-slate-400 dark:text-slate-500 self-center",children:["+",e.flights.length-5," more"]})]}),(e.isT2||e.remark)&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[e.isT2&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-md bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300 font-medium",children:"Terminal 2"}),e.remark&&(0,s.jsx)("span",{className:"text-slate-500 dark:text-slate-400 italic",children:e.remark})]})]})]})},e.id)})]}):(null==Y?void 0:Y.length)===0?(0,s.jsxs)(O.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto rounded-2xl bg-gradient-to-br from-sky-100 to-violet-100 dark:from-sky-900/30 dark:to-violet-900/30 flex items-center justify-center mb-4 shadow-lg shadow-sky-500/10",children:(0,s.jsx)(n.A,{className:"h-10 w-10 text-sky-500 dark:text-sky-400"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-1",children:"No Schedules"}),(0,s.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm max-w-xs mx-auto",children:"There are no transport schedules for this date. Try selecting a different day."})]}):(0,s.jsx)("div",{className:"space-y-4",children:null==Y?void 0:Y.map(e=>{var t,r,l,i,d,o;let c=e.vehicle,m=er((null==c?void 0:c.type)||(null==c?void 0:c.vehicleType)||""),x=(null==(t=e.assignments)?void 0:t.length)||0,h=(null==(r=e.vehicle)?void 0:r.capacity)||0,g=x>=h,f=((e,t)=>{let a=t>0?e/t*100:0;return a>=100?{bg:"bg-emerald-100 dark:bg-emerald-900/40",text:"text-emerald-700 dark:text-emerald-300",ring:"ring-emerald-500/20",label:"Full"}:a>=75?{bg:"bg-amber-100 dark:bg-amber-900/40",text:"text-amber-700 dark:text-amber-300",ring:"ring-amber-500/20",label:"Almost full"}:a>=50?{bg:"bg-sky-100 dark:bg-sky-900/40",text:"text-sky-700 dark:text-sky-300",ring:"ring-sky-500/20",label:"Half full"}:{bg:"bg-slate-100 dark:bg-slate-800/60",text:"text-slate-600 dark:text-slate-400",ring:"ring-slate-500/10",label:"Available"}})(x,h),k=h>0?Math.min(x/h*100,100):0,j=null==(l=e.notes)?void 0:l.match(/Flights?: ([^-]+)/),N=j?j[1].trim():"",y=N?N.split(",").map(e=>e.trim()).filter(Boolean):[],w=(null==(i=e.assignments)?void 0:i.slice(0,2))||[],M=Math.max(0,x-2),P=R.has(e.id);return(0,s.jsx)(O.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:"easeOut"},layout:!0,ref:t=>{a.current[e.id]=t},children:(0,s.jsxs)("div",{className:(0,A.cn)("relative rounded-2xl overflow-hidden cursor-pointer","bg-white dark:bg-slate-800","border shadow-sm hover:shadow-lg transition-all duration-300","active:scale-[0.98]",m.border,m.shadow,P&&"ring-2 ring-amber-400 ring-offset-2 shadow-lg shadow-amber-200/50"),onClick:()=>{G(e),B(!0)},children:[(0,s.jsx)("div",{className:(0,A.cn)("absolute left-0 top-0 bottom-0 w-1.5 rounded-l-2xl",m.accent)}),P&&(0,s.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/40 dark:to-orange-950/40 px-4 py-2.5 border-b border-amber-200/60 dark:border-amber-800/40 flex items-center gap-2.5",children:[(0,s.jsx)("div",{className:"p-1 rounded-full bg-amber-100 dark:bg-amber-900/50",children:(0,s.jsx)(v.A,{className:"h-3.5 w-3.5 text-amber-600 dark:text-amber-400"})}),(0,s.jsx)("span",{className:"text-xs font-medium text-amber-700 dark:text-amber-300",children:"Flight time mismatch - review transport timing"})]}),(0,s.jsxs)("div",{className:"p-4 pl-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)("div",{className:"flex items-baseline gap-1",children:(0,s.jsx)("span",{className:"text-2xl font-bold tracking-tight text-slate-900 dark:text-white",children:null==(d=e.pickupTime)?void 0:d.slice(0,5)})}),(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center gap-1.5 px-2.5 py-1 rounded-lg border",m.badge),children:[(0,s.jsx)(n.A,{className:(0,A.cn)("h-3.5 w-3.5",m.text)}),(0,s.jsx)("span",{className:(0,A.cn)("text-sm font-semibold",m.text),children:(null==(o=e.vehicle)?void 0:o.name)||"TBD"})]})]}),(0,s.jsxs)("div",{className:(0,A.cn)("flex items-center gap-2 px-3 py-1.5 rounded-xl ring-1",f.bg,f.ring),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("svg",{className:"h-5 w-5 -rotate-90",viewBox:"0 0 20 20",children:[(0,s.jsx)("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-200 dark:text-slate-700"}),(0,s.jsx)("circle",{cx:"10",cy:"10",r:"8",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"".concat(.502*k," 50.2"),strokeLinecap:"round",className:(0,A.cn)(g?"text-emerald-500":k>=75?"text-amber-500":k>=50?"text-sky-500":"text-slate-400")})]}),(0,s.jsx)(u.A,{className:"h-2.5 w-2.5 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400"})]}),(0,s.jsxs)("span",{className:(0,A.cn)("text-sm font-bold tabular-nums",f.text),children:[x,"/",h]})]})]}),y.length>0&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-1.5",children:(0,s.jsx)(b.A,{className:"h-3.5 w-3.5 text-sky-500 dark:text-sky-400"})}),y.slice(0,4).map((e,t)=>(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md text-xs font-medium bg-sky-50 dark:bg-sky-950/40 text-sky-700 dark:text-sky-300 border border-sky-200/60 dark:border-sky-800/40",children:e},t)),y.length>4&&(0,s.jsxs)("span",{className:"text-xs text-slate-400 dark:text-slate-500 self-center",children:["+",y.length-4," more"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm mb-3",children:[(0,s.jsx)("div",{className:(0,A.cn)("p-1.5 rounded-lg",m.iconBg),children:(0,s.jsx)(p.A,{className:(0,A.cn)("h-3.5 w-3.5",m.text)})}),(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300 font-medium truncate",children:e.pickupLocation}),e.dropoffLocation&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-slate-400 dark:text-slate-500",children:[(0,s.jsx)("div",{className:"w-4 h-px bg-slate-300 dark:bg-slate-600"}),(0,s.jsx)("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),(0,s.jsx)("span",{className:"text-slate-600 dark:text-slate-300 font-medium truncate",children:e.dropoffLocation})]})]}),(0,s.jsx)("div",{className:"h-px bg-gradient-to-r from-transparent via-slate-200 dark:via-slate-700 to-transparent mb-3"}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:x>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex -space-x-1.5",children:[w.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{className:(0,A.cn)("w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-semibold ring-2 ring-white dark:ring-slate-800",0===t?"bg-sky-100 text-sky-700 dark:bg-sky-900/50 dark:text-sky-300":1===t?"bg-violet-100 text-violet-700 dark:bg-violet-900/50 dark:text-violet-300":"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300"),style:{zIndex:3-t},children:[e.guest.firstName[0],e.guest.lastName[0]]},e.id)),M>0&&(0,s.jsxs)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-semibold bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-300 ring-2 ring-white dark:ring-slate-800",style:{zIndex:0},children:["+",M]})]}),(0,s.jsxs)("span",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:[w.map((e,t)=>(0,s.jsxs)("span",{children:[e.guest.firstName,t<w.length-1&&", "]},e.id)),M>0&&" +".concat(M)]})]}):(0,s.jsx)("span",{className:"text-xs text-slate-400 dark:text-slate-500 italic",children:"No guests assigned"})}),g?(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-lg bg-emerald-50 dark:bg-emerald-950/40",children:[(0,s.jsx)("svg",{className:"h-3.5 w-3.5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300",children:"Full"})]}):(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-slate-400 dark:text-slate-500",children:[(0,s.jsx)("span",{className:"text-xs",children:"Tap to assign"}),(0,s.jsx)("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]})]})]})},e.id)})})}),(0,s.jsx)(q,{schedule:E,open:D,onOpenChange:e=>{B(e),e||U()},onUpdate:()=>{U()}})]})}function W(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80 dark:from-slate-950 dark:to-slate-900 pb-24 px-4 py-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded w-1/3"}),(0,s.jsx)("div",{className:"h-12 bg-slate-200 dark:bg-slate-700 rounded"}),(0,s.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-32 bg-slate-200 dark:bg-slate-700 rounded-2xl"},e))})]})}),children:(0,s.jsx)(Y,{})})}},20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},20243:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(95155),r=a(64269);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",t),...a})}},20779:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]])},21873:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},23183:(e,t,a)=>{"use strict";a.d(t,{i:()=>s});let s=(0,a(99914).pY)()},27063:(e,t,a)=>{"use strict";a.d(t,{Fm:()=>m,Qs:()=>u,cj:()=>d,h:()=>c,qp:()=>x});var s=a(95155);a(12115);var r=a(76297),l=a(65229),i=a(64269);function d(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"sheet",...t})}function n(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"sheet-portal",...t})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"sheet-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function c(e){let{className:t,children:a,side:d="right",...c}=e;return(0,s.jsxs)(n,{children:[(0,s.jsx)(o,{}),(0,s.jsxs)(r.UC,{"data-slot":"sheet-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===d&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===d&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===d&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===d&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t overflow-hidden",t),...c,children:[a,(0,s.jsxs)(r.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,s.jsx)(l.A,{className:"size-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"sheet-header",className:(0,i.cn)("flex flex-col gap-1.5 p-4",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"sheet-title",className:(0,i.cn)("text-foreground font-semibold",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"sheet-description",className:(0,i.cn)("text-muted-foreground text-sm",t),...a})}},35299:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},52056:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},52987:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},57268:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a(12115),r=a(97602),l=a(95155),i="horizontal",d=["horizontal","vertical"],n=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:n=i,...o}=e,c=(a=n,d.includes(a))?n:i;return(0,l.jsx)(r.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:t})});n.displayName="Separator";var o=n},58576:(e,t,a)=>{"use strict";a.d(t,{Y:()=>r});var s=a(92118);function r(e,t){return+(0,s.a)(e)<+(0,s.a)(t)}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>l});var s=a(95155);a(12115);var r=a(64269);function l(e){let{className:t,type:a,...l}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}},79956:(e,t,a)=>{"use strict";a.d(t,{e:()=>r});var s=a(92381);function r(e,t,a){return(0,s.f)(e,-t,a)}},86259:(e,t,a)=>{"use strict";a.d(t,{w:()=>i});var s=a(95155);a(12115);var r=a(57268),l=a(64269);function i(e){let{className:t,orientation:a="horizontal",decorative:i=!0,...d}=e;return(0,s.jsx)(r.b,{"data-slot":"separator",decorative:i,orientation:a,className:(0,l.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...d})}},86651:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},90368:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},95740:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},96516:(e,t,a)=>{Promise.resolve().then(a.bind(a,18990))},97602:(e,t,a)=>{"use strict";a.d(t,{sG:()=>i});var s=a(12115);a(47650);var r=a(32467),l=a(95155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,r.TL)(`Primitive.${t}`),i=s.forwardRef((e,s)=>{let{asChild:r,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(r?a:t,{...i,ref:s})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{})}},e=>{e.O(0,[779,751,914,476,38,339,238,227,36,441,255,358],()=>e(e.s=96516)),_N_E=e.O()}]);